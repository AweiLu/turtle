(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const h of s)if(h.type==="childList")for(const a of h.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function e(s){const h={};return s.integrity&&(h.integrity=s.integrity),s.referrerPolicy&&(h.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?h.credentials="include":s.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function i(s){if(s.ep)return;s.ep=!0;const h=e(s);fetch(s.href,h)}})();class w{constructor(t){this.canvas=document.getElementById(t),this.ctx=this.canvas.getContext("2d"),this.width=0,this.height=0,this.resize(),window.addEventListener("resize",()=>this.resize())}resize(){this.width=window.innerWidth,this.height=window.innerHeight,this.canvas.width=this.width,this.canvas.height=this.height}clear(){this.ctx.clearRect(0,0,this.width,this.height)}drawBackground(t,e){const i=this.ctx.createLinearGradient(0,0,0,this.height);i.addColorStop(0,"#001a33"),i.addColorStop(1,"#000510"),this.ctx.fillStyle=i,this.ctx.fillRect(0,0,this.width,this.height),this.ctx.save(),this.ctx.fillStyle="rgba(100, 255, 255, 0.1)";for(let a=0;a<50;a++){const r=(a*137.5-t*.2)%this.width,o=(a*293.3-e*.2)%this.height,f=r<0?r+this.width:r,u=o<0?o+this.height:o;this.ctx.beginPath(),this.ctx.arc(f,u,Math.random()*2,0,Math.PI*2),this.ctx.fill()}this.ctx.restore(),this.drawSeaweed(t),this.ctx.save(),this.ctx.globalCompositeOperation="overlay";const s=this.ctx.createLinearGradient(this.width*.5,0,this.width*.2,this.height);s.addColorStop(0,"rgba(255, 255, 255, 0.15)"),s.addColorStop(1,"rgba(255, 255, 255, 0)"),this.ctx.translate(this.width/2,0),this.ctx.rotate(Math.sin(performance.now()*5e-4)*.1),this.ctx.translate(-this.width/2,0),this.ctx.fillStyle=s,this.ctx.fillRect(-200,0,this.width+400,this.height),this.ctx.restore();const h=this.ctx.createRadialGradient(this.width/2,this.height/2,this.height/3,this.width/2,this.height/2,this.height);h.addColorStop(0,"rgba(0,0,0,0)"),h.addColorStop(1,"rgba(0,0,20,0.6)"),this.ctx.fillStyle=h,this.ctx.fillRect(0,0,this.width,this.height)}drawSeaweed(t){this.ctx.save(),this.ctx.fillStyle="#004433";const e=performance.now()*.001;for(let i=0;i<20;i++){const s=(i*200-t*.5)%(this.width+200),h=s<-100?s+this.width+200:s,a=100+Math.sin(i)*50;this.ctx.beginPath(),this.ctx.moveTo(h,this.height);const r=Math.sin(e+i)*20;this.ctx.quadraticCurveTo(h+r,this.height-a/2,h+r*2,this.height-a),this.ctx.lineTo(h+20+r*2,this.height-a),this.ctx.quadraticCurveTo(h+20+r,this.height-a/2,h+20,this.height),this.ctx.fill()}this.ctx.restore()}draw(t,e=0,i=0){this.clear(),this.drawBackground(e,i),t(this.ctx)}}class g{constructor(){this.keys={},this.mouse={x:0,y:0,down:!1},window.addEventListener("keydown",t=>this.keys[t.code]=!0),window.addEventListener("keyup",t=>this.keys[t.code]=!1),window.addEventListener("mousemove",t=>{this.mouse.x=t.clientX,this.mouse.y=t.clientY}),window.addEventListener("mousedown",()=>this.mouse.down=!0),window.addEventListener("mouseup",()=>this.mouse.down=!1)}isKeyDown(t){return!!this.keys[t]}}class n{constructor(t){this.game=t,this.x=window.innerWidth/2,this.y=window.innerHeight/2,this.width=40,this.height=30,this.speed=5,this.angle=0,this.velocity={x:0,y:0}}update(t){const e=t.mouse.x-this.x,i=t.mouse.y-this.y;Math.sqrt(e*e+i*i)>5&&(this.x+=e*.05,this.y+=i*.05,this.angle=Math.atan2(i,e))}draw(t){t.save(),t.translate(this.x,this.y),t.rotate(this.angle),t.fillStyle="#2ecc71",t.beginPath(),t.ellipse(0,0,30,20,0,0,Math.PI*2),t.fill(),t.fillStyle="#27ae60",t.beginPath(),t.arc(30,0,12,0,Math.PI*2),t.fill(),t.fillStyle="#27ae60",t.beginPath(),t.ellipse(10,-20,15,8,Math.PI/4,0,Math.PI*2),t.fill(),t.beginPath(),t.ellipse(10,20,15,8,-Math.PI/4,0,Math.PI*2),t.fill(),t.restore()}}class d{constructor(){this.particles=[]}emit(t,e,i="bubble"){const s={x:t,y:e,type:i,vx:(Math.random()-.5)*(i==="sparkle"?5:2),vy:i==="bubble"?-Math.random()*2-1:i==="bubble_stream"?-Math.random()*4-2:(Math.random()-.5)*5,life:1,size:Math.random()*5+2,color:i==="bubble"||i==="bubble_stream"?`rgba(255, 255, 255, ${Math.random()*.5+.2})`:i==="sparkle"?`rgba(255, 255, 0, ${Math.random()})`:"orange"};this.particles.push(s)}update(t){for(let e=this.particles.length-1;e>=0;e--){const i=this.particles[e];i.x+=i.vx,i.y+=i.vy,i.life-=.02,i.type==="bubble"&&(i.x+=Math.sin(i.y*.1+performance.now()*.005)*.5),i.life<=0&&this.particles.splice(e,1)}}draw(t){for(const e of this.particles)t.save(),t.globalAlpha=e.life,t.fillStyle=e.color,t.beginPath(),t.arc(e.x,e.y,e.size,0,Math.PI*2),t.fill(),t.restore()}}class m{constructor(t,e,i,s="TRASH"){this.game=t,this.x=e,this.y=i,this.type=s,this.size=s==="SHARK"?60:30,this.speed=s==="SHARK"?7:Math.random()*2+1,this.angle=s==="SHARK"?Math.PI:Math.random()*Math.PI*2,this.wobble=0}update(t){if(this.type==="MINE")this.wobble+=.05,this.x-=1,this.y+=Math.sin(this.wobble)*.5;else if(this.type==="SHARK"){this.x-=this.speed;const e=this.game.turtle.y-this.y;Math.abs(e)<300&&(this.y+=Math.sign(e)*1.5)}else this.x+=Math.cos(this.angle)*this.speed,this.y+=Math.sin(this.angle)*this.speed}draw(t){if(t.save(),t.translate(this.x,this.y),this.type==="MINE"){t.fillStyle="#444",t.beginPath(),t.arc(0,0,20,0,Math.PI*2),t.fill();for(let e=0;e<8;e++)t.rotate(Math.PI/4),t.beginPath(),t.moveTo(15,-5),t.lineTo(30,0),t.lineTo(15,5),t.fill();t.fillStyle=`rgba(255, 0, 0, ${Math.abs(Math.sin(performance.now()*.005))})`,t.beginPath(),t.arc(0,0,5,0,Math.PI*2),t.fill()}else this.type==="SHARK"?(t.scale(-1,1),t.fillStyle="#2a2a2a",t.beginPath(),t.ellipse(0,0,60,25,0,0,Math.PI*2),t.fill(),t.beginPath(),t.moveTo(50,0),t.lineTo(80,-25),t.lineTo(80,25),t.fill(),t.beginPath(),t.moveTo(0,-15),t.lineTo(15,-45),t.lineTo(30,-15),t.fill(),t.fillStyle="#ff0000",t.beginPath(),t.arc(-35,-8,4,0,Math.PI*2),t.fill(),t.fillStyle="#fff",t.beginPath(),t.moveTo(-50,5),t.lineTo(-40,15),t.lineTo(-30,5),t.fill()):(t.fillStyle="#ff4444",t.beginPath(),t.moveTo(0,-this.size),t.lineTo(this.size,this.size),t.lineTo(-this.size,this.size),t.fill());t.restore()}}class p{constructor(t,e,i){this.game=t,this.x=e,this.y=i,this.size=15,this.collected=!1,this.wobble=Math.random()*Math.PI*2}update(t){this.wobble+=.05}draw(t){this.collected||(t.save(),t.translate(this.x,this.y+Math.sin(this.wobble)*5),t.fillStyle="#ffff00",t.beginPath(),t.arc(0,0,this.size,0,Math.PI*2),t.fill(),t.shadowBlur=15,t.shadowColor="#ffff00",t.strokeStyle="#ffffff",t.lineWidth=2,t.stroke(),t.restore())}}class y{constructor(){this.renderer=new w("gameCanvas"),this.input=new g,this.turtle=new n(this),this.particles=new d,this.obstacles=[],this.collectibles=[],this.lastTime=0,this.isRunning=!1,this.score=0,this.spawnTimer=0,this.camera={x:0,y:0}}start(){this.isRunning||(this.reset(),this.isRunning=!0,this.lastTime=performance.now(),requestAnimationFrame(t=>this.loop(t)),document.getElementById("start-screen").style.display="none",document.getElementById("score").innerText="Score: 0")}reset(){this.turtle=new n(this),this.obstacles=[],this.collectibles=[],this.particles=new d,this.score=0,this.spawnTimer=0,this.camera={x:0,y:0}}loop(t){if(!this.isRunning)return;const e=t-this.lastTime;this.lastTime=t,this.update(e),this.draw(),requestAnimationFrame(i=>this.loop(i))}update(t){this.turtle.update(this.input),this.particles.update(t),this.camera.x=this.turtle.x,this.camera.y=this.turtle.y,this.spawnTimer+=t,this.spawnTimer>600&&(this.spawnTimer=0,this.spawnEntity()),this.obstacles.forEach(e=>e.update(t)),this.collectibles.forEach(e=>e.update(t)),this.obstacles=this.obstacles.filter(e=>this.getDist(e,this.turtle)<2e3),this.collectibles=this.collectibles.filter(e=>this.getDist(e,this.turtle)<2e3),this.checkCollisions()}spawnEntity(){const t=Math.random()*Math.PI*2,e=800;let i=this.turtle.x+Math.cos(t)*e,s=this.turtle.y+Math.sin(t)*e;if(Math.random()<.2)this.collectibles.push(new p(this,i,s));else{let a="TRASH";const r=Math.random();r<.5?(a="SHARK",i=this.turtle.x+900,s=this.turtle.y+(Math.random()-.5)*700):r<.8&&(a="MINE"),this.obstacles.push(new m(this,i,s,a))}}getDist(t,e){const i=t.x-e.x,s=t.y-e.y;return Math.sqrt(i*i+s*s)}checkCollisions(){for(let t=this.collectibles.length-1;t>=0;t--){const e=this.collectibles[t];this.getDist(e,this.turtle)<e.size+this.turtle.width/2&&(this.score+=10,document.getElementById("score").innerText=`Score: ${this.score}`,this.particles.emit(e.x,e.y,"sparkle"),this.collectibles.splice(t,1))}for(const t of this.obstacles)this.getDist(t,this.turtle)<t.size+this.turtle.width/3&&this.gameOver()}gameOver(){this.isRunning=!1;const t=document.getElementById("start-screen");t.style.display="block",t.innerHTML=`<h1>Game Over</h1><p>Score: ${this.score}</p><p>Press Enter to Restart</p>`}draw(){this.renderer.draw(t=>{this.particles.draw(t),this.obstacles.forEach(e=>e.draw(t)),this.collectibles.forEach(e=>e.draw(t)),this.turtle.draw(t)},this.camera.x,this.camera.y)}}const c=new y;window.addEventListener("keydown",l=>{l.code==="Enter"&&!c.isRunning&&c.start()});
